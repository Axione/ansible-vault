---
# File: vars/RedHat.yml - Red Hat vars for Vault

vault_os_packages:
  - "{% if ( ansible_distribution  == 'Fedora' and ansible_distribution_version is version('28', '<') ) or \
      ( ansible_distribution  == 'CentOS' and ansible_distribution_version is version('8', '<') ) or \
      ( ansible_distribution  == 'Amazon' and ansible_distribution_version is version('3', '<') ) or \
      ( ansible_distribution  == 'OracleLinux' and ansible_distribution_version is version('8', '<') ) \
    %}\
      libselinux-python\
    {% else %}\
      python3-libselinux\
    {% endif %}"
  - git
  - unzip

_vault_repository_url: "{% if ( ansible_distribution | lower  == 'fedora') %}\
      https://rpm.releases.hashicorp.com/fedora/$releasever/$basearch/stable\
    {% elif (ansible_distribution | lower  == 'amazon') %}\
      https://rpm.releases.hashicorp.com/AmazonLinux/$releasever/$basearch/stable
    {% else %}\
      https://rpm.releases.hashicorp.com/RHEL/$releasever/$basearch/stable\
    {% endif %}"
_vault_repository_key_url: "{{ _vault_repository_url | urlsplit('scheme') }}://{{ _vault_repository_url | urlsplit('netloc') }}/gpg"
